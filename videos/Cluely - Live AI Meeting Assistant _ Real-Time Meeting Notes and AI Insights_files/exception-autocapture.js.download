!function(){"use strict";var r="undefined"!=typeof window?window:void 0,e="undefined"!=typeof globalThis?globalThis:r,n=null==e?void 0:e.navigator;null==e||e.document,null==e||e.location,null==e||e.fetch,null!=e&&e.XMLHttpRequest&&"withCredentials"in new e.XMLHttpRequest&&e.XMLHttpRequest,null==e||e.AbortController,null==n||n.userAgent;var t=null!=r?r:{};function a(r,e,n,t,a,i,o){try{var u=r[i](o),c=u.value}catch(r){return void n(r)}u.done?e(c):Promise.resolve(c).then(t,a)}function i(r){return function(){var e=this,n=arguments;return new Promise((function(t,i){var o=r.apply(e,n);function u(r){a(o,t,i,u,c,"next",r)}function c(r){a(o,t,i,u,c,"throw",r)}u(void 0)}))}}function o(){return o=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)({}).hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},o.apply(null,arguments)}var u=Object.prototype.toString,c=r=>void 0===r,l=r=>"[object String]"==u.call(r);function s(r){return null===r||"object"!=typeof r}function v(r,e){return Object.prototype.toString.call(r)==="[object "+e+"]"}function f(r){return!c(Event)&&function(r,e){try{return r instanceof e}catch(r){return!1}}(r,Event)}var d,h,p;function y(r){var e=globalThis._posthogChunkIds;if(e){var n=Object.keys(e);return p&&n.length===h?p:(h=n.length,p=n.reduce(((n,t)=>{d||(d={});var a=d[t];if(a)n[a[0]]=a[1];else for(var i=r(t),o=i.length-1;o>=0;o--){var u=i[o],c=null==u?void 0:u.filename,l=e[t];if(c&&l){n[c]=l,d[t]=[c,l];break}}return n}),{}))}}var w="?";function g(r,e,n,t){var a={platform:"web:javascript",filename:r,function:"<anonymous>"===e?w:e,in_app:!0};return c(n)||(a.lineno=n),c(t)||(a.colno=t),a}var b=(r,e)=>{var n=-1!==r.indexOf("safari-extension"),t=-1!==r.indexOf("safari-web-extension");return n||t?[-1!==r.indexOf("@")?r.split("@")[0]:w,n?"safari-extension:"+e:"safari-web-extension:"+e]:[r,e]},m=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,E=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,j=/\((\S*)(?::(\d+))(?::(\d+))\)/,k=r=>{var e=m.exec(r);if(e){var[,n,t,a]=e;return g(n,w,+t,+a)}var i=E.exec(r);if(i){if(i[2]&&0===i[2].indexOf("eval")){var o=j.exec(i[2]);o&&(i[2]=o[1],i[3]=o[2],i[4]=o[3])}var[u,c]=b(i[1]||w,i[2]);return g(c,u,i[3]?+i[3]:void 0,i[4]?+i[4]:void 0)}},x=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,O=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,S=r=>{var e=x.exec(r);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=O.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var t=e[3],a=e[1]||w;return[a,t]=b(a,t),g(t,a,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},M=/\(error: (.*)\)/,A=50;function R(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return function(r){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[],a=r.split("\n"),i=n;i<a.length;i++){var u=a[i];if(!(u.length>1024)){var c=M.test(u)?u.replace(M,"$1"):u;if(!c.match(/\S*Error: /)){for(var l of e){var s=l(c);if(s){t.push(s);break}}if(t.length>=A)break}}}return function(r){if(!r.length)return[];var e=Array.from(r);return e.reverse(),e.slice(0,A).map((r=>{return o({},r,{filename:r.filename||(n=e,n[n.length-1]||{}).filename,function:r.function||w});var n}))}(t)}}class _{buildFromUnknown(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e&&e.mechanism||{handled:!0,type:"generic"},t=this.buildCoercingContext(n,e,0).apply(r),a=this.buildParsingContext(),i=this.parseStacktrace(t,a);return{$exception_list:this.convertToExceptionList(i,n),$exception_level:"error"}}coerceFallback(r){var e;return{type:"Error",value:"Unknown error",stack:null==(e=r.syntheticException)?void 0:e.stack,synthetic:!0}}parseStacktrace(r,e){var n,t;return null!=r.cause&&(n=this.parseStacktrace(r.cause,e)),""!=r.stack&&null!=r.stack&&(t=this.applyChunkIds(this.stackParser(r.stack,r.synthetic?1:0),e.chunkIdMap)),o({},r,{cause:n,stack:t})}applyChunkIds(r,e){return r.map((r=>(r.filename&&e&&(r.chunk_id=e[r.filename]),r)))}applyCoercers(r,e){for(var n of this.coercers)if(n.match(r))return n.coerce(r,e);return this.coerceFallback(e)}applyModifiers(r){var e=this;return i((function*(){var n=r;for(var t of e.modifiers)n=yield t(n);return n}))()}modifyFrames(r){var e=this;return i((function*(){var n;null!=r.cause&&(n=yield e.modifyFrames(r.cause));var t=[];return null!=r.stack&&(t=yield e.applyModifiers(r.stack)),o({},r,{cause:n,stack:t})}))()}convertToExceptionList(r,e){var n,t,a,i={type:r.type,value:r.value,mechanism:{type:null!=(n=e.type)?n:"generic",handled:null==(t=e.handled)||t,synthetic:null!=(a=r.synthetic)&&a}};r.stack&&(i.stacktrace={type:"raw",frames:r.stack});var u=[i];return null!=r.cause&&u.push(...this.convertToExceptionList(r.cause,o({},e,{handled:!0}))),u}buildParsingContext(){return{chunkIdMap:y(this.stackParser)}}buildCoercingContext(r,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,t=(n,t)=>{if(t<=4){var a=this.buildCoercingContext(r,e,t);return this.applyCoercers(n,a)}};return o({},e,{syntheticException:0==n?e.syntheticException:void 0,mechanism:r,apply:r=>t(r,n),next:r=>t(r,n+1)})}constructor(r,e,n){void 0===r&&(r=[]),void 0===e&&(e=[]),void 0===n&&(n=[]),this.coercers=r,this.modifiers=n,this.stackParser=R(...e)}}class C{match(r){return this.isDOMException(r)||this.isDOMError(r)}coerce(r,e){var n=l(r.stack);return{type:this.getType(r),value:this.getValue(r),stack:n?r.stack:void 0,cause:r.cause?e.next(r.cause):void 0,synthetic:!1}}getType(r){return this.isDOMError(r)?"DOMError":"DOMException"}getValue(r){var e=r.name||(this.isDOMError(r)?"DOMError":"DOMException");return r.message?e+": "+r.message:e}isDOMException(r){return v(r,"DOMException")}isDOMError(r){return v(r,"DOMError")}}class D{match(r){return r instanceof Error}coerce(r,e){return{type:this.getType(r),value:this.getMessage(r,e),stack:this.getStack(r),cause:r.cause?e.next(r.cause):void 0,synthetic:!1}}getType(r){return r.name||r.constructor.name}getMessage(r,e){var n=r.message;return n.error&&"string"==typeof n.error.message?String(n.error.message):String(n)}getStack(r){return r.stacktrace||r.stack||void 0}}class P{match(r){return v(r,"ErrorEvent")&&null!=r.error}coerce(r,e){var n,t=e.apply(r.error);return t||{type:"ErrorEvent",value:r.message,stack:null==(n=e.syntheticException)?void 0:n.stack,synthetic:!0}}constructor(){}}var T=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class U{match(r){return"string"==typeof r}coerce(r,e){var n,[t,a]=this.getInfos(r);return{type:null!=t?t:"Error",value:null!=a?a:r,stack:null==(n=e.syntheticException)?void 0:n.stack,synthetic:!0}}getInfos(r){var e="Error",n=r,t=r.match(T);return t&&(e=t[1],n=t[2]),[e,n]}}var I=["fatal","error","warning","log","info","debug"];function z(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,n=Object.keys(r);if(n.sort(),!n.length)return"[object has no keys]";for(var t=n.length;t>0;t--){var a=n.slice(0,t).join(", ");if(!(a.length>e))return t===n.length||a.length<=e?a:a.slice(0,e)+"..."}return""}class F{match(r){return"object"==typeof r&&null!==r}coerce(r,e){var n,t=this.getErrorPropertyFromObject(r);return t?e.apply(t):{type:this.getType(r),value:this.getValue(r),stack:null==(n=e.syntheticException)?void 0:n.stack,level:this.isSeverityLevel(r.level)?r.level:"error",synthetic:!0}}getType(r){return f(r)?r.constructor.name:"Error"}getValue(r){if("name"in r&&"string"==typeof r.name){var e="'"+r.name+"' captured as exception";return"message"in r&&"string"==typeof r.message&&(e+=" with message: '"+r.message+"'"),e}if("message"in r&&"string"==typeof r.message)return r.message;var n=this.getObjectClassName(r);return(n&&"Object"!==n?"'"+n+"'":"Object")+" captured as exception with keys: "+z(r)}isSeverityLevel(r){return l(r)&&!(r=>l(r)&&0===r.trim().length)(r)&&I.indexOf(r)>=0}getErrorPropertyFromObject(r){for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var n=r[e];if(n instanceof Error)return n}}getObjectClassName(r){try{var e=Object.getPrototypeOf(r);return e?e.constructor.name:void 0}catch(r){return}}}class L{match(r){return f(r)}coerce(r,e){var n,t=r.constructor.name;return{type:t,value:t+" captured as exception with keys: "+z(r),stack:null==(n=e.syntheticException)?void 0:n.stack,synthetic:!0}}}class H{match(r){return s(r)}coerce(r,e){var n;return{type:"Error",value:"Primitive value captured as exception: "+String(r),stack:null==(n=e.syntheticException)?void 0:n.stack,synthetic:!0}}}class N{match(r){return v(r,"PromiseRejectionEvent")}coerce(r,e){var n,t=this.getUnhandledRejectionReason(r);return s(t)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(t),stack:null==(n=e.syntheticException)?void 0:n.stack,synthetic:!0}:e.apply(t)}getUnhandledRejectionReason(r){if(s(r))return r;try{if("reason"in r)return r.reason;if("detail"in r&&"reason"in r.detail)return r.detail.reason}catch(r){}return r}}var V=e=>{var n={t:function(n){if(r&&t.POSTHOG_DEBUG&&!c(r.console)&&r.console){for(var a=("__rrweb_original__"in r.console[n]?r.console[n].__rrweb_original__:r.console[n]),i=arguments.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];a(e,...o)}},info:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];n.t("log",...e)},warn:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];n.t("warn",...e)},error:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];n.t("error",...e)},critical:function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];console.error(e,...n)},uninitializedWarning:r=>{n.error("You must initialize PostHog before calling "+r)},createLogger:r=>V(e+" "+r)};return n},W=V("[PostHog.js]").createLogger;null!=n&&n.sendBeacon;var Y=W("[ExceptionAutocapture]"),q=new _([new C,new N,new P,new D,new L,new F,new U,new H],[k,S]);function B(r){var{event:e,error:n}=r;return q.buildFromUnknown(n||e,{mechanism:{handled:!1}})}var G={wrapOnError:e=>{var n=r;n||Y.info("window not available, cannot wrap onerror");var t=n.onerror;return n.onerror=function(){for(var r,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=B({event:a[0],error:a[4]});return e(o),null!==(r=null==t?void 0:t(...a))&&void 0!==r&&r},n.onerror.__POSTHOG_INSTRUMENTED__=!0,()=>{var r;null==(r=n.onerror)||delete r.__POSTHOG_INSTRUMENTED__,n.onerror=t}},wrapUnhandledRejection:e=>{var n=r;n||Y.info("window not available, cannot wrap onUnhandledRejection");var t=n.onunhandledrejection;return n.onunhandledrejection=function(r){var a,i=B({event:r});return e(i),null!==(a=null==t?void 0:t.apply(n,[r]))&&void 0!==a&&a},n.onunhandledrejection.__POSTHOG_INSTRUMENTED__=!0,()=>{var r;null==(r=n.onunhandledrejection)||delete r.__POSTHOG_INSTRUMENTED__,n.onunhandledrejection=t}},wrapConsoleError:r=>{var e=console;e||Y.info("console not available, cannot wrap console.error");var n=e.error;return e.error=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=t.join(" "),o=B({error:t.find((r=>r instanceof Error)),event:i});return r(o),null==n?void 0:n(...t)},e.error.__POSTHOG_INSTRUMENTED__=!0,()=>{var r;null==(r=e.error)||delete r.__POSTHOG_INSTRUMENTED__,e.error=n}}};t.__PosthogExtensions__=t.__PosthogExtensions__||{},t.__PosthogExtensions__.errorWrappingFunctions=G,t.posthogErrorWrappingFunctions=G}();
//# sourceMappingURL=exception-autocapture.js.map
